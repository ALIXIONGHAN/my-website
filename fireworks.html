<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ† ç»å…¸è½¨è¿¹çƒŸèŠ± + æ–‡å­—çˆ†ç‚¸</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      overflow: hidden;
      font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <canvas id="bg"></canvas>
  <canvas id="trail"></canvas>
  <canvas id="particles"></canvas>
  <canvas id="text-layer"></canvas>

  <script>
    const bgCanvas = document.getElementById('bg');
    const trailCanvas = document.getElementById('trail');
    const particleCanvas = document.getElementById('particles');
    const textCanvas = document.getElementById('text-layer');

    const bgCtx = bgCanvas.getContext('2d');
    const trailCtx = trailCanvas.getContext('2d');
    const pCtx = particleCanvas.getContext('2d');
    const tCtx = textCanvas.getContext('2d');

    function resize() {
      const w = window.innerWidth;
      const h = window.innerHeight;
      [bgCanvas, trailCanvas, particleCanvas, textCanvas].forEach(c => {
        c.width = w;
        c.height = h;
      });
    }
    window.addEventListener('resize', resize);
    resize();

    // ç¥ç¦è¯­åº“
    const messages = [
      "ğŸ‰ æ–°å¹´å¿«ä¹ï¼", "ğŸ‡ å¹¸ç¦å®‰åº· ğŸ’–", "ğŸŒŸ ä¸‡äº‹å¦‚æ„ï¼", "ğŸ’« æ¢¦æƒ³æˆçœŸ âœ¨",
      "ğŸŒˆ å¥½è¿è¿è¿ï¼", "ğŸ† å¿ƒæƒ³äº‹æˆ ğŸ’«", "â¤ï¸ é˜–å®¶æ¬¢ä¹ï¼", "ğŸŒŒ å¹³å®‰å–œä¹ ğŸ•Šï¸",
      "ğŸš€ å‰ç¨‹ä¼¼é”¦ï¼", "ğŸŒ  Love & Peace ğŸŒ", "ğŸ”¥ é—ªè€€å¦‚ä½ ï¼", "ğŸ æƒŠå–œä¸æ–­ï¼"
    ];

    // === ä¸Šå‡é˜¶æ®µçš„çƒŸèŠ±ä¸»ä½“ï¼ˆæœªçˆ†ç‚¸ï¼‰===
    class Rocket {
      constructor(x) {
        this.x = x;
        this.y = bgCanvas.height; // ä»åº•éƒ¨å¼€å§‹
        this.vx = (Math.random() - 0.5) * 2; // å¾®å°æ°´å¹³æ‰°åŠ¨
        this.vy = -(8 + Math.random() * 4); // å‘ä¸Šé€Ÿåº¦
        this.hue = Math.floor(Math.random() * 360);
        this.trail = [];
        this.maxTrailLength = 20;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;
        this.vy += 0.02; // å¾®å¼±é‡åŠ›å‡é€Ÿï¼ˆå®é™…æ˜¯å‡ç¼“ä¸Šå‡ï¼‰

        // æ·»åŠ å°¾è¿¹ç‚¹
        this.trail.push({ x: this.x, y: this.y });
        if (this.trail.length > this.maxTrailLength) {
          this.trail.shift();
        }

        // åˆ°è¾¾çˆ†ç‚¸é«˜åº¦ï¼ˆä¸ŠåŠå±ï¼‰
        return this.y < bgCanvas.height * (0.3 + Math.random() * 0.3);
      }

      drawTrail(ctx) {
        for (let i = 0; i < this.trail.length; i++) {
          const point = this.trail[i];
          const alpha = i / this.trail.length;
          const radius = alpha * 3;
          ctx.beginPath();
          ctx.arc(point.x, point.y, radius, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(255, 255, 255, ${alpha * 0.7})`;
          ctx.fill();
        }
      }

      getExplosionPosition() {
        return { x: this.x, y: this.y };
      }
    }

    // === çˆ†ç‚¸æ–‡å­— ===
    class TextParticle {
      constructor(x, y, text) {
        this.x = x;
        this.y = y;
        this.text = text;
        this.life = 90;
        this.maxLife = 90;
      }
      update() { this.life--; }
      draw(ctx) {
        if (this.life <= 0) return;
        const progress = this.life / this.maxLife;
        const alpha = Math.min(1, progress * 2);
        const scale = 0.6 + (1 - progress) * 1.0;
        ctx.save();
        ctx.globalAlpha = alpha;
        ctx.font = `bold ${Math.floor(26 * scale)}px "Microsoft YaHei", Arial, sans-serif`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillStyle = '#fff';
        ctx.shadowColor = '#fff';
        ctx.shadowBlur = 25;
        ctx.fillText(this.text, this.x, this.y);
        ctx.restore();
      }
      isDead() { return this.life <= 0; }
    }

    // === çˆ†ç‚¸ç²’å­ ===
    class Particle {
      constructor(x, y, hue) {
        this.x = x;
        this.y = y;
        this.hue = hue + Math.random() * 40 - 20;
        this.radius = Math.random() * 2 + 0.5;
        this.vx = (Math.random() - 0.5) * 10;
        this.vy = (Math.random() - 0.5) * 10;
        this.alpha = 1;
        this.decay = Math.random() * 0.025 + 0.01;
        this.gravity = 0.03;
        this.resistance = 0.98;
      }
      update() {
        this.vx *= this.resistance;
        this.vy *= this.resistance;
        this.x += this.vx;
        this.y += this.vy;
        this.vy += this.gravity;
        this.alpha -= this.decay;
      }
      draw(ctx) {
        if (this.alpha <= 0) return;
        ctx.save();
        ctx.globalAlpha = this.alpha;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = `hsla(${this.hue}, 100%, 65%, ${this.alpha})`;
        ctx.fill();
        ctx.restore();
      }
      isDead() { return this.alpha <= 0; }
    }

    // === çˆ†ç‚¸å¯¹è±¡ ===
    class Explosion {
      constructor(x, y, hue) {
        this.x = x;
        this.y = y;
        this.hue = hue;
        this.particles = [];
        this.text = new TextParticle(x, y, messages[Math.floor(Math.random() * messages.length)]);
        const count = 130 + Math.floor(Math.random() * 70);
        for (let i = 0; i < count; i++) {
          this.particles.push(new Particle(x, y, hue));
        }
      }
      update() {
        this.particles.forEach(p => p.update());
        this.particles = this.particles.filter(p => !p.isDead());
        this.text.update();
      }
      drawParticles(ctx) {
        this.particles.forEach(p => p.draw(ctx));
      }
      drawText(ctx) {
        if (!this.text.isDead()) this.text.draw(ctx);
      }
      isDone() {
        return this.particles.length === 0 && this.text.isDead();
      }
    }

    const rockets = [];   // æ­£åœ¨ä¸Šå‡çš„çƒŸèŠ±
    const explosions = []; // å·²çˆ†ç‚¸çš„çƒŸèŠ±

    function launchRocket() {
      const x = 50 + Math.random() * (bgCanvas.width - 100);
      rockets.push(new Rocket(x));
    }

    function drawBackground() {
      bgCtx.fillStyle = '#000';
      bgCtx.fillRect(0, 0, bgCanvas.width, bgCanvas.height);
    }

    // ä¸»å¾ªç¯
    function animate() {
      requestAnimationFrame(animate);

      drawBackground();

      // æ¸…é™¤å„å±‚
      trailCtx.fillStyle = 'rgba(0,0,0,0.1)';
      trailCtx.fillRect(0, 0, trailCanvas.width, trailCanvas.height);

      pCtx.fillStyle = 'rgba(0,0,0,0.12)';
      pCtx.fillRect(0, 0, particleCanvas.width, particleCanvas.height);

      tCtx.clearRect(0, 0, textCanvas.width, textCanvas.height);

      // å‘å°„æ–°ç«ç®­ï¼ˆé¢‘ç‡é€‚ä¸­ï¼‰
      if (Math.random() < 0.04) {
        launchRocket();
      }

      // æ›´æ–°å’Œç»˜åˆ¶ä¸Šå‡ä¸­çš„ç«ç®­
      for (let i = rockets.length - 1; i >= 0; i--) {
        const rocket = rockets[i];
        const shouldExplode = rocket.update();
        rocket.drawTrail(trailCtx);
        if (shouldExplode) {
          const pos = rocket.getExplosionPosition();
          explosions.push(new Explosion(pos.x, pos.y, rocket.hue));
          rockets.splice(i, 1);
        }
      }

      // æ›´æ–°å’Œç»˜åˆ¶çˆ†ç‚¸
      for (let i = explosions.length - 1; i >= 0; i--) {
        const exp = explosions[i];
        exp.update();
        exp.drawParticles(pCtx);
        exp.drawText(tCtx);
        if (exp.isDone()) {
          explosions.splice(i, 1);
        }
      }
    }

    animate();
  </script>
</body>
</html>22